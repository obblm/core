{% extends '@ObblmCore/base.html.twig' %}
{% set title = (rule.ruleKey ~ '.star_players.title')|trans({}, rule.ruleKey) %}
{% block title 'obblm.rules.title'|trans({}, 'obblm')
~ ' > ' ~ rule.name|trans({}, rule.ruleKey)
    ~ ' > ' ~ title %}
{% block body %}
    {% set star_players = get_all_star_players(rule) %}
    {% dump(star_players) %}
    <h1 class="title">{{ title }} ({{ star_players.count }})</h1>
    {% embed '@ObblmCore/team/table.' ~ rule.template ~ '.html.twig' with { 'translation_domain': rule.ruleKey, 'playerVersions': star_players } %}
        {% block player_head_number %}{% endblock %}
        {% block player_head_name %}
            {{ parent() }}
            <th class="position">{{ 'obblm.trait.roster'|trans({}, 'obblm') }}</th>
        {% endblock %}
        {% block player_head_type %}{% endblock %}
        {% block player_head_injuries %}{% endblock %}
        {% block player_head_spp %}{% endblock %}
        {% block player_line %}
            {% set position = get_star_player(playerVersion, rule) %}
            {% if position|is_multiple_star_player %}
                <tr class="multiplayer">
                    <th class="left aligned editable">{{ position.name|trans({}, position.translationDomain) }}</th>
                    <th class="left aligned">{{ get_star_player_rosters(rule, position) }}</th>
                    <th colspan="5"></th>
                    <th class="right aligned">{{ position.value|price }}</th>
                </tr>
                {% for part in position.parts %}
                    {% set player = get_star_player_part(rule, part) %}
                    {% embed '@ObblmCore/team/player-line.' ~ rule.template ~ '.html.twig' with { 'playerVersion': player } %}
                        {% block number %}{% endblock %}
                        {% block name %}
                            <td class="left aligned editable">{{ part.name|trans({}, part.translationDomain) }}</td>
                            <td class="left aligned"></td>
                        {% endblock %}
                        {% block position %}{% endblock %}
                        {% block injuries %}{% endblock %}
                        {% block spp %}{% endblock %}
                        {% block value %}<td class="right aligned">-</td>{% endblock %}
                    {% endembed %}
                {% endfor %}
            {% else %}
            {% embed '@ObblmCore/team/player-line.' ~ rule.template ~ '.html.twig' with { 'playerVersion': playerVersion } %}
                {% block number %}{% endblock %}
                {% block name %}
                    <td class="left aligned editable">{{ position.name|trans({}, position.translationDomain) }}</td>
                    <td class="left aligned editable">{{ get_star_player_rosters(rule, position) }}</td>
                {% endblock %}
                {% block position %}{% endblock %}
                {% block injuries %}{% endblock %}
                {% block spp %}{% endblock %}
            {% endembed %}
            {% endif %}
        {% endblock %}
    {% endembed %}
{% endblock %}
